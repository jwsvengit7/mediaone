package com.example.test.ServiceImpl;import com.example.test.Config.UserDetailsID;import com.example.test.Entity.User;import com.example.test.Repositories.UserRepository;import com.example.test.Services.EmailSender;import jakarta.servlet.http.HttpSession;import lombok.RequiredArgsConstructor;import lombok.extern.slf4j.Slf4j;import org.springframework.mail.SimpleMailMessage;import org.springframework.mail.javamail.JavaMailSender;import org.springframework.security.core.context.SecurityContextHolder;import org.springframework.security.core.userdetails.UserDetails;import org.springframework.stereotype.Service;@Service@RequiredArgsConstructor@Slf4jpublic class EmailSenderImplementation implements EmailSender {    private final JavaMailSender sender;    private final UserRepository userRepository;    @Override    public Object otpVerication(String OTP_REQUEST) {        String email =  UserDetailsID.getEmail();            User user = userRepository.findUsersByEmail(email);            if(user!=null) {                user.setActivate(true);                userRepository.save(user);                return "Success";            }else{                return null;            }        }    public void sendEmail(String link){        SimpleMailMessage message = new SimpleMailMessage();        message.setFrom("temple.chiorlu@decagon.dev");        message.setSubject("SIGN UP OTP");        message.setTo(UserDetailsID.getEmail());        message.setText("Welcome To Media One\n" +                "AUTHENTICATION PROCESS\n" +                "Link VERIFICATION: http://localhost:8080/api/v1/user/token="+link+                "\n" +                "" +                "" +                "Thanks for Subscribing with us");        sender.send(message);    }}